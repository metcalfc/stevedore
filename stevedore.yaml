boxes:
  centos: metcalfc/centos70-docker
  ubuntu: metcalfc/trusty-docker

roles:
  swarm-manager:
    -
      type: shell
      script: 'scripts/install-swarm.sh'

  swarm:
    -
      type: shell
      script: 'scripts/install-swarm.sh'

  docker:
    -
      type: shell
      script: 'scripts/install-docker.sh'
      args:
        DOCKER_GIT_REF: ''
        DOCKER_GIT_REPO: ''
        DOCKER_BINARY: 'https://test.docker.com/builds/Linux/x86_64/docker-1.5.0-rc4'

  machine:
    -
      type: shell
      script: 'scripts/install-machine.sh'
      args:
        MACHINE_GIT_REF: 'HEAD'
        MACHINE_GIT_REPO: 'https://github.com/docker/machine.git'
        MACHINE_BINARY: ''

  compose:
    -
      type: shell
      script: 'scripts/install-compose.sh'
      args:
        COMPOSE_BINARY: 'https://github.com/docker/fig/releases/download/1.1.0-rc2/docker-compose-Darwin-x86_64'

  dhe:
    -
      type: shell
      script: 'scripts/install-dhe.sh'

vm_defaults: &defaults
  box: 'ubuntu'
  domain: 'docker.vm'
  memory: 1024
  cpus: 2
  ip_range: '192.168.56.32/28'
  roles: [docker, swarm]

vms:
  -
    <<: *defaults
    name: enterprise
    memory: 2048
    roles: [docker, dhe, swarm-manager]
  -
    <<: *defaults
    name: swarm01
    labels:
        storage: 'ssd'
        location: 'rack1'
  -
    <<: *defaults
    name: swarm02
    labels:
        storage: 'magnetic'
        location: 'rack1'
  -
    <<: *defaults
    name: swarm03
    box: 'centos'
    labels:
        storage: 'magnetic'
        location: 'rack1'
  -
    <<: *defaults
    name: swarm04
    labels:
        storage: 'ssd'
        location: 'rack2'
  -
    <<: *defaults
    name: swarm05
    labels:
        storage: 'magnetic'
        location: 'rack2'
  -
    <<: *defaults
    name: swarm06
    box: 'centos'
    labels:
        storage: 'magnetic'
        location: 'rack2'
